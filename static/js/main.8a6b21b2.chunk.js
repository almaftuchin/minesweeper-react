(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(80)},50:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),c=(a(50),a(5)),i=a(6),s=a(9),u=a(7),d=a(10),m=a(13),h=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getValue",value:function(){var e=this.props.cell,t=e.revealed,a=e.flagged,n=e.mine,r=e.val;return t?n?"\ud83d\udca3":r||null:a?"\ud83d\udea9":null}},{key:"render",value:function(){var e=this.props,t=e.cell,a=e.onClick,n=e.onContextMenu,o="cell"+(t.revealed?" revealed":"")+(t.revealed&&t.val?[" one"," two"," three"," four"," five"," six"," seven"," eight"][t.val-1]:"")+(t.flagged?" flagged":"")+(t.boom?" boom":"");return r.a.createElement("div",{onClick:a,className:o,onContextMenu:n},this.getValue())}}]),t}(n.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){e.props.started&&e.props.clockIn()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return r.a.createElement("div",{className:"clock"},this.props.time)}}]),t}(n.Component),v=a(81),b=a(82),g=a(83),p=a(26),k=(a(66),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).newGame=function(){a.progress=0,a.setState({board:a.initBoard(),status:"Good luck!",started:0,godMode:0,time:"00:00"})},a.initBoard=function(){for(var e=[],t=0;t<a.size;t++)e=[].concat(Object(m.a)(e),[{mine:0,revealed:0,flagged:0,val:0,boom:0}]);return e},a.addMines=function(e,t){for(var n=0,r=[],o=a.mines,l=a.width,c=function(){var o=a.randomNumber(),c=[-(l+1),-l,-(l-1),-1,0,1,l-1,l,l+1].map(function(e){return o+e});e[o].mine||c.includes(t)||(e[o].mine=1,r=[].concat(Object(m.a)(r),[o]),n++)};n<o;)c();return a.setState({minesLoc:r}),[e,r]},a.addNeighbor=function(e,t){var n=a.size,r=a.width;return t.forEach(function(t){t>=r&&(t-r-1>=0&&(t-r-1)%r!==r-1&&!e[t-r-1].mine&&e[t-r-1].val++,e[t-r].mine||e[t-r].val++,(t-r+1)%r===0||e[t-r+1].mine||e[t-r+1].val++),t<n-r&&((t+r-1)%r===r-1||e[t+r-1].mine||e[t+r-1].val++,e[t+r].mine||e[t+r].val++,(t+r+1)%r===0||e[t+r+1].mine||e[t+r+1].val++),t-1>=0&&(t-1)%r!==r-1&&!e[t-1].mine&&e[t-1].val++,t+1<n&&(t+1)%r!==0&&!e[t+1].mine&&e[t+1].val++}),e},a.randomNumber=function(){return Math.floor(Math.random()*a.size)},a.boom=function(e){var t=Object(m.a)(a.state.board);t[e].boom=1,t.forEach(function(e){e.revealed=1}),a.setState({board:t,status:"\ud83d\ude22 You lost \ud83d\ude22",started:0})},a.handleClick=function(e,t){a.state.started||t.revealed?a.reveal(e,t):a.setState({started:1,board:a.fillBoard(e)},function(){a.reveal(e,t)})},a.reveal=function(e,t){var n=t.mine,r=t.revealed,o=t.flagged,l=t.val;if(!r&&!o){if(n)return a.boom(e);if(0===l)a.floodFill(e);else{var c=Object(m.a)(a.state.board);if(c[e].revealed=1,++a.progress===a.size-a.mines)return c.forEach(function(e){e.revealed=1}),a.setState({board:c,status:"\ud83c\udf89 YOU WON \ud83c\udf89",started:0},function(){return a.sendData()});a.setState({board:c})}}},a.sendData=function(){a.state.logged&&!a.state.godMode&&fetch("https://cryptic-harbor-11039.herokuapp.com/score?id=".concat(localStorage.id,"&name=").concat(localStorage.name,"&score=").concat(a.state.time,"&time=").concat(1*new Date,"&access_token=").concat(localStorage.accessToken))},a.floodFill=function(e){var t=Object(m.a)(a.state.board);if(!t[e].mine&&!t[e].revealed){t[e].revealed=1,a.progress++,a.setState({board:t});var n=a.width,r=a.size;e>=n&&(e-n-1>=0&&(e-n-1)%n!==n-1&&a.reveal(e-n-1,t[e-n-1]),a.reveal(e-n,t[e-n]),(e-n+1)%n!==0&&a.reveal(e-n+1,t[e-n+1])),e<r-n&&((e+n-1)%n!==n-1&&a.reveal(e+n-1,t[e+n-1]),a.reveal(e+n,t[e+n]),(e+n+1)%n!==0&&a.reveal(e+n+1,t[e+n+1])),e-1>=0&&(e-1)%n!==n-1&&a.reveal(e-1,t[e-1]),e+1<r&&(e+1)%n!==0&&a.reveal(e+1,t[e+1])}},a.rightClick=function(e,t,n){if(n.preventDefault(),!a.state.started)return a.handleClick(e,t,n);if(!a.state.board[e].revealed){var r=Object(m.a)(a.state.board);r[e].flagged=!r[e].flagged,a.setState({board:r})}},a.clockIn=function(){var e=a.state.time.split(":"),t=Number(e[0]),n=Number(e[1])+1;t+=0===(n%=60)?1:0,n=n<10?"0"+n:n,t=t<10?"0"+t:t,a.setState({time:t+":"+n})},a.cheat=function(){if(!a.state.started)return p.NotificationManager.info("Start the game first!","Uh oh!",3e3);var e=Object(m.a)(a.state.board);a.state.minesLoc.forEach(function(t){e[t].revealed=1}),a.setState({board:e,godMode:1})},a.renderBoard=function(){return a.state.board.map(function(e,t){return r.a.createElement(h,{key:t,onClick:function(){return a.handleClick(t,e)},onContextMenu:function(n){return a.rightClick(t,e,n)},cell:e})})},a.progress=0,a.height=e.height,a.width=e.width,a.mines=e.mines,a.size=e.height*e.width,a.state={board:a.initBoard(),status:"Good luck!",started:0,time:"00:00",minesLoc:[],godMode:0,logged:localStorage.logged},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"fillBoard",value:function(e){var t=this.initBoard();return t=this.addNeighbor.apply(this,Object(m.a)(this.addMines(t,e)))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.NotificationContainer,null),r.a.createElement(v.a,{className:"text-center"},r.a.createElement(b.a,{md:12},r.a.createElement("h1",{style:{color:"#febd16"}},this.state.status)),r.a.createElement(b.a,{md:12},r.a.createElement(g.a,{variant:"primary",onClick:this.newGame},"New Game")," ",r.a.createElement(g.a,{variant:"danger",onClick:this.cheat,disabled:this.state.godMode},"Defuse Mines \ud83d\udc40")),r.a.createElement(b.a,{md:12},r.a.createElement(f,{started:this.state.started,time:this.state.time,clockIn:this.clockIn})),r.a.createElement(b.a,{md:12,className:"game"},this.renderBoard())))}}]),t}(n.Component)),E=a(87),O=a(86),j=a(37),w=a(36),y=a.n(w),S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).facebookResponse=function(t){t&&t.name&&t.accessToken&&(localStorage.name=t.name,localStorage.expired=1*new Date+1e3*t.expiresIn,localStorage.id=t.id,localStorage.accessToken=t.accessToken,localStorage.logged=1,e.setState({logged:1},function(){}))},e.state={logged:0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.expired&&(1*new Date<parseInt(localStorage.expired)?this.setState({logged:1}):localStorage.clear())}},{key:"render",value:function(){return this.state.logged?r.a.createElement(j.a,null,localStorage.name):r.a.createElement(O.a,null,r.a.createElement(y.a,{appId:"317151258877538",autoLoad:!1,callback:this.facebookResponse,render:function(e){return r.a.createElement(g.a,{variant:"primary",size:"sm",onClick:e.onClick},"Login with Facebook")}}))}}]),t}(n.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{bg:"dark",variant:"dark"},r.a.createElement(E.a.Brand,null,r.a.createElement("img",{alt:"",src:"../logo.png",width:"30",height:"30",className:"d-inline-block align-top"})," MineSweeper"),r.a.createElement(O.a,{className:"ml-auto"},r.a.createElement(S,null)))}}]),t}(n.Component),M=a(43),N=a.n(M),B=a(84),D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={data:[],gotTop:0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://cryptic-harbor-11039.herokuapp.com/top5").then(function(e){return e.json()}).then(function(t){e.setState({data:t,gotTop:1})})}},{key:"render",value:function(){var e=null;return this.state.gotTop&&(e=this.state.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.score),r.a.createElement("td",null,N()(e.time).format("MMM Do YY")))})),r.a.createElement("div",null,r.a.createElement(B.a,{striped:!0,bordered:!0,style:{color:"white"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Time"))),r.a.createElement("tbody",null,e)))}}]),t}(n.Component),x=a(85),I=(a(79),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(x.a,{style:{height:"100vh"}},r.a.createElement(v.a,{className:"h-100 align-items-center"},r.a.createElement(b.a,{md:12},r.a.createElement(k,{height:8,width:8,mines:10})),r.a.createElement(b.a,{md:12},r.a.createElement(D,null)))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.8a6b21b2.chunk.js.map